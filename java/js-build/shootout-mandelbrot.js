/* Generated from Java with JSweet 2.0.0 - http://www.jsweet.org */
var Main = /** @class */ (function () {
    function Main() {
    }
    Main.main = function (args) {
        new Main.Mandelbrot(/* parseInt */ parseInt("5000")).compute();
    };
    return Main;
}());
Main["__class"] = "Main";
(function (Main) {
    var Mandelbrot = /** @class */ (function () {
        function Mandelbrot(size) {
            this.buf = (function (s) { var a = []; while (s-- > 0)
                a.push(0); return a; })(Mandelbrot.BUFFER_SIZE);
            this.bufLen = 0;
            this.size = 0;
            this.fac = 0;
            this.shift = 0;
            this.size = size;
            this.fac = 2.0 / size;
            this.shift = size % 8 === 0 ? 0 : (8 - size % 8);
        }
        Mandelbrot.prototype.compute = function () {
            console.info(this.size);
            for (var y = 0; y < this.size; y++)
                this.computeRow(y);
        };
        Mandelbrot.prototype.computeRow = function (y) {
            var bits = 0;
            var Ci = (y * this.fac - 1.0);
            var bufLocal = this.buf;
            for (var x = 0; x < this.size; x++) {
                var Zr = 0.0;
                var Zi = 0.0;
                var Cr = (x * this.fac - 1.5);
                var i = 50;
                var ZrN = 0;
                var ZiN = 0;
                do {
                    Zi = 2.0 * Zr * Zi + Ci;
                    Zr = ZrN - ZiN + Cr;
                    ZiN = Zi * Zi;
                    ZrN = Zr * Zr;
                } while ((!(ZiN + ZrN > 4.0) && --i > 0));
                bits = bits << 1;
                if (i === 0)
                    bits++;
                if (x % 8 === 7) {
                    bufLocal[this.bufLen++] = (bits | 0);
                    if (this.bufLen === Mandelbrot.BUFFER_SIZE) {
                        this.bufLen = 0;
                    }
                    bits = 0;
                }
            }
            ;
            if (this.shift !== 0) {
                bits = bits << this.shift;
                bufLocal[this.bufLen++] = (bits | 0);
                if (this.bufLen === Mandelbrot.BUFFER_SIZE) {
                    this.bufLen = 0;
                }
            }
        };
        Mandelbrot.BUFFER_SIZE = 8192;
        return Mandelbrot;
    }());
    Main.Mandelbrot = Mandelbrot;
    Mandelbrot["__class"] = "Main.Mandelbrot";
})(Main || (Main = {}));
Main.main(null);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3RzL01haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsbUVBQW1FO0FBQ25FO0lBQUE7SUFJQSxDQUFDO0lBSGlCLFNBQUksR0FBbEIsVUFBbUIsSUFBZTtRQUM5QixJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFBLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2xFLENBQUM7SUFDTCxXQUFDO0FBQUQsQ0FBQyxBQUpELElBSUM7QUFDRCxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsTUFBTSxDQUFDO0FBR3pCLFdBQVUsSUFBSTtJQUVWO1FBR0ksb0JBQW1CLElBQWE7WUFXaEMsUUFBRyxHQUFjLENBQUMsVUFBQSxDQUFDLElBQU0sSUFBSSxDQUFDLEdBQUMsRUFBRSxDQUFDLENBQUMsT0FBTSxDQUFDLEVBQUUsR0FBQyxDQUFDO2dCQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBRWhHLFdBQU0sR0FBWSxDQUFDLENBQUM7WUFaaEIsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7WUFDZCxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztZQUNiLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1lBQ2YsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7WUFDakIsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDO1lBQ3RCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNqRCxDQUFDO1FBWU0s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